# Supabase Chat Setup

To get this chat application running with Supabase, follow these steps:

## 1. Create a Supabase Project
1. Go to [Supabase](https://supabase.com/) and create a new project.
2. Retrieve your **Project URL** and **Anon Key** from `Settings > API`.

## 2. Configure the Frontend
Update `frontend/src/lib/supabase.js` with your project details, or create a `frontend/.env` file:
```env
VITE_SUPABASE_URL=your-project-url
VITE_SUPABASE_ANON_KEY=your-anon-key
```

## 3. Database Setup
Run the following SQL in the **Supabase SQL Editor** to create the messages table and enable real-time:

```sql
-- 1. Create the messages table
create table messages (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  sender text not null,
  content text not null
);

-- 2. Enable Realtime for the messages table
alter publication supabase_realtime add table messages;

-- 3. (Optional) Set up Row Level Security (RLS)
-- For a public chat, you can allow everyone to read and write:
alter table messages enable row level security;

create policy "Allow public read access"
  on messages for select
  using (true);

create policy "Allow public insert access"
  on messages for insert
  with check (true);
```

## 4. Enable Realtime Features
Ensure that **Broadcast** and **Presence** are enabled in your Supabase dashboard (usually enabled by default when you use `supabase.channel()`).

## 5. Run the App
```bash
cd frontend
npm install
npm run dev
```

## 6. GitHub Actions & Code Review
The project includes automated code review tools:
- **Linting**: Runs on every PR and uses **Reviewdog** to post comments directly on the code.
- **AI Code Review**: Uses OpenAI to provide detailed feedback on PRs.

### Setting up AI Code Review
1. Go to your GitHub repository **Settings > Secrets and variables > Actions**.
2. Add a **New repository secret**:
   - Name: `OPENAI_API_KEY`
   - Value: Your OpenAI API key.
3. The next time you open a Pull Request, the AI will automatically review your changes!
